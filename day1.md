#认识linux
---
## Date:2017.6.7  By author:longyunfeigu

###linux初识
在了解linux之前，我们先来看以下三个问题    
* 什么是操作系统
* linux和windows的区别
* 我们要学的linux主要用来做什么

**操作系统**    
操作系统是一种特殊的软件，这个软件是安装在计算机硬件之上的，主要功能是帮我们管理计算机系统资源的分配。对于这里的系统资源，我们着重了解下内存中的MMU，也就是内存管理单元
    
内存是一个硬件设备，是与CPU进行沟通的桥梁。如果我们要在操作系统中使用内存，需要先把内存虚拟成一个内存页。内存的物理地址是有一系列二进制数字组成的，从第0个内存单元到第N个内存单元。但是我们一般看到的内存地址都是以`0x`开头的十六进制数，这是为什么呢？别急，先来看看下面的一个例子：试想一下，我们想要把一个数放在第10000个内存单元中，CPU还得一个一个地数到第10000个单元，然后再把数放进内存单元，这样是极耗费CPU资源的。那么怎么才能快速寻址呢?   
我们可以在CPU这一层加一个中间转换层，把内存的物理地址映射成内存页，可以看作是'一张表',相当于给每个内存单元加了一个'门牌号'。这样我们想要把一个数放在第10000个内存单元，CPU只需要通过这张表的对应关系就能找到第10000个内存单元的'门牌号'，通过门牌号直接把数据放进去。这就是所谓的直接寻址。CPU在用户层面分配的以`0x`开头的十六进制数就相当于门牌号。    
还有一个问题，就是为什么32位的系统只能使用4G的内存。32的系统CPU的地址总线是32，所以寻址范围是0x00000000~0xffffffff，这里总共有2^32个地址，也就是4G个地址。而计算机内存的最小存储单元是1byte,所以CPU可以支持的内存大小就是4GB。   
有时候，我们的程序占用了内存没有立即释放，这样就会造成迭代内存，造成内存泄漏。内存泄漏不是内存不足，是人为原因导致的。   

这里有句话需要记住，对于理解计算机科学的问题有大帮助："所有计算机科学中的问题都能通过增加一个中间转换层来解决"（"All problems in computer science can be solved by another level of indirection"）     

**linux和windows的区别**   
windows的理念是`不管你要不要,我都给你`,因此有些服务可能有用但我们不需要，windows也帮我打开了，无形中就会消耗我们的系统资源，而这些资源恰巧又是没有必要浪费的。<br />   
linux的理念是`要不要由你决定`,因为linux是开源的，所以我们可以定制和优化我们的系统。除此之外，linux还有两个特点：`安全`和`稳定`。虽然linux不收费，但是linux的服务收费，而现如今大多数公司的技术人才都能处理linux系统方面的问题，所以可以说linux`完全免费`。   
**我们要学的linux主要用来做什么**   
linux最主要的功能还是用作服务器(虽然开发中也有一部分人喜欢用ubantu上开发)，其实我们的日常生活中处处都用到linux系统，如飞机的控制系统、ATM机、手机的安卓系统等。由此可见，我们的日常生活中一直都在使用linux服务器提供的服务    
      
###linux介绍
linux是一个免费使用和自动传播的开源类unix系统，全称是GNU/linux(GNU是一个开源计划，linux加入了GNU)     
**linux基本概念**   
1.一切皆文件    
2.linux严格区分大小写    
3.所有的系统管理都是通过配置文件控制    
    
**linux基本命令**
##### 一、路径  
绝对路径：以`/`开头    
相对路径：不以`/`开头   
`.`表示当前路径，一般用作拼接当前路径下的路径(单独使用没太大意义)，`..`表示上一级目录。`pwd`查看当前所在目录
##### 二、关机/重启

shutdown -h now  &nbsp;&nbsp;--马上关机
shutdown -r +10  &nbsp;&nbsp;--10分钟后重启   
shutdown -c  &nbsp;&nbsp;--取消计划中的关机或者重启
halt -p  &nbsp;&nbsp;--关闭系统后关闭电源
reboot  &nbsp;&nbsp;--马上重启
init 6  &nbsp;&nbsp;--马上重启    
init number是用来改变系统的运行级别的，定义在/etc/inittab中   
* 0 --- 关机
* 1 ---  默认没有用户和密码验证，单用户模式，忘记管理员密码用来修改密码，或者一些简单的排错
* 2 --- 不带网络的文本模式(插上网线等操作也无法联网)
* 3 --- 带网络的文本模式(我们经常使用的模式)
* 4 --- 保留，没有用
* 5 --- 带图形界面的模式
* 6 --- 重启电脑    


```
查看当前电脑运行级别 : runlevel
```
![](1.png)
```5表示当前系统级别为5。N表示not,即先前的系统级别也是5，没有改变过 ```   
   
**注意:**centos7中inittab设置不再生效,可以通过下述方式改变
![](2.png)

##### 三、切换目录

```
cd ~ 等价于 cd  &nbsp;&nbsp; -- 回到当前用户家目录
cd ..   &nbsp;&nbsp; -- 回到上一级目录
cd -   &nbsp;&nbsp; -- 回到上一次所在目录
cd &lt;path&gt;   --
```
##### 四、查看文件

```
ls &nbsp;&nbsp; --查看当前目录内容
ls -l &nbsp;&nbsp; --查看当前目录内容详细信息
ls -a &nbsp;&nbsp; --查看当前目录所有内容(包括隐藏文件)
ls -ltr  &nbsp;&nbsp; --以长格式和时间及以时间反向顺序来显示目录中的内容
ls -hl &nbsp;&nbsp; --以友好格式查看当前目录所有内容(文件大小会显示)
ls -R &nbsp;&nbsp; --递归列出目录内容
tree /a/ &nbsp;&nbsp; --查看a目录的目录树结构
注意:参数之间相互影响配合。如直接ls -h会发现参数h没有效果，需要结合参数l，也就是ls -hl
  
```
##### 五、创建文件

```
touch /a.txt &nbsp；&nbsp; --更新文件的时间戳/如果目标不存在，会创建一个空文件
vim/vi a.txt &nbsp；&nbsp; --a.txt存在就打开并编辑。不存在就新建并编辑
```

##### 六、查看文件详细信息

```
stat /a.txt

```
![](3.png)
```
最近访问：打开文件查看里面内容的时间，如cat /a.txt
最近更改：打开文件并编辑里面的内容的时间，ls -l查看的时间也是这个时间
最近改动：文件属性发生改变的时间，如更改了文件的权限和属性

```
##### 七、seq 序列

```
seq 100  &nbsp;&nbsp; --产生1到100的序列
seq 1 2 100 &nbsp;&nbsp;--产生1到100的奇数序列
mkdir `seq 1 10 100` &nbsp;&nbsp;--批量创建文件夹(实际用处不是很大)[反引号把命令的标准输出插在一个命令行中任何位置]

```
##### 八、创建目录

```
mkdir /a/ &nbsp;&nbsp; --创建单层目录(只能创建单层)
mkdir -p /c/d &nbsp;&nbsp; --递归创建多层目录;目录已存在不报错(目录存在时创建同名目录会报错)[静默模式]

```
##### 九、复制和移动

```
cp /dir1/file /dir2 &nbsp;&nbsp; --复制文件到dir2(时间戳全部更改为现在的时间)，-a参数表示完全复制，包括文件的所有属性
cp /dir1/file1 /dir2/file2 &nbsp;&nbsp; --把file1复制程file2(file2已存在会询问，-f参数会删掉相同文件名并复制，-f参数用的不是很多，因为linux的每一个文件都是重要的)
cp -r /dir1 /dir2 &nbsp;&nbsp; --把目录dir1复制成dir2(dir2一般是. 或者根据自己的需求命名，没有-r参数是无法复制目录的)
常用：cp -a 和 cp -ar
mv用法和cp类似

```
##### 十、删除

```
rm -f a.txt &nbsp;&nbsp; -- 不询问直接删除
rm -rf /dir &nbsp;&nbsp; -- 递归删除目录及目录里的内容    

```
##### 十一、man --帮助手册
1	用户命令  
2	内核系统调用（从用户空间到进入点内核的）  
3	库函数  
4	特殊文件和设备  
5	文件格式和规范  
6	游戏  
7	规范、标准和其他页面  
8	管理员用的命令帮助手册

|按键  |进行工作|
|------|--------|
|空格键|向下翻一页|
|Enter键|向下换一行|
|pagedown|向下翻一页|
|page up| 向上翻一页|
|home| 去到第一页|
|end| 去到最后一页|
|/string |向下搜索string这个字符串|
|?string|向上搜寻string这个字符串|
|n,N|n继续下一个搜寻,N进行反向搜寻|
|q|退出man page|

##### 十二、时间

```
date &nbsp;&nbsp; -- 查看当前时间
date +%F &nbsp;&nbsp; -- full date;same as %Y-%m-%d
date "+%Y-%m-%d %H:%M:%S"  &nbsp;&nbsp; -- 日期格式化,便于log保存
date -s '2016-6-7 11:00:00'  --- 设置时间(配合hwclock -w永久更新时间)
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &nbsp;&nbsp; --  复制相应的时区文件，替换系统时区文件

```



### 快捷键：

```
crtl + c : 中断  
ctrl + d : 中止输入  
ctrl + l : 清屏 \\#clear  
ctrl + z : 把当前任务调至后台  
jobs： 查看后台任务  
fg 将后台中的命令调至前台继续运行  
fg　任务编号  
bg 将一个在后台暂停的命令，变成在后台继续执行
bg 　任务编号  
ctrl + k :删除当前光标到后面的所有内容  
ctrl + u :删除当前光标到前面的所有内容  


```